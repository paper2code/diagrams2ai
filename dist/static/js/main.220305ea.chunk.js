(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{169:function(e,t,n){},170:function(e,t,n){},203:function(e,t,n){e.exports=n(381)},208:function(e,t,n){},209:function(e,t,n){},350:function(e,t,n){},380:function(e,t,n){},381:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),o=n(49),s=n.n(o),l=(n(208),n(51)),r=n(43),c=n(16),d=n(17),u=n(18),h=n(15),m=n(19),v=n(382),p=n(398),g=(n(209),n(393)),f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"http://localhost:5000";Object(c.a)(this,e),this.url=t}return Object(d.a)(e,[{key:"http",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"POST";return fetch(this.url+e,{method:n,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}},{key:"get",value:function(e,t){return this.http(e,t,"GET").then(function(e){return e.json()})}},{key:"post",value:function(e,t){return this.http(e,t,"POST").then(function(e){return e.json()})}}]),e}(),b=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).handleModelDelete=function(e){n.backend.post("/model/delete",{id:e}).then(function(e){n.getModelsList()},function(e){console.log("Failed to delete model",e)})},n.backend=new f,n.state={selectedmodel:"",models:[]},n.getModelsList(),n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"getModelsList",value:function(){var e=this;this.backend.get("/models/list").then(function(t){e.setState({models:t})},function(e){console.log("Failed to post new message",e)})}},{key:"render",value:function(){var e=this;return i.a.createElement(g.a,{celled:!0,selectable:!0},i.a.createElement(g.a.Header,null,i.a.createElement(g.a.Row,null,i.a.createElement(g.a.HeaderCell,null,"Id"),i.a.createElement(g.a.HeaderCell,null,"Name"),i.a.createElement(g.a.HeaderCell,{width:1}))),i.a.createElement(g.a.Body,null,this.state.models.map(function(t,n){return i.a.createElement(g.a.Row,{key:t.id},i.a.createElement(g.a.Cell,{onClick:e.props.onModelSelected.bind(null,t)},t.id),i.a.createElement(g.a.Cell,{onClick:e.props.onModelSelected.bind(null,t)},t.name),i.a.createElement(g.a.Cell,null,i.a.createElement(v.a,{onClick:e.handleModelDelete.bind(null,t.id)},"Delete")))})))}}]),t}(i.a.Component),E=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(d.a)(t,[{key:"onModelSelected",value:function(e){this.props.history.push("/designer/editor?model="+e.id)}},{key:"render",value:function(){return i.a.createElement("div",{id:"homepage"},i.a.createElement(l.b,{to:"/designer/editor"},i.a.createElement(v.a,{color:"blue"},"Create New")),i.a.createElement(p.a,null,"Models:"),i.a.createElement(b,{onModelSelected:this.onModelSelected.bind(this)}))}}]),t}(i.a.Component),y=n(397),k=n(27),w=n(392),j=n(26),O=n(179),x=n.n(O),C=n(390);function A(){return"_"+Math.random().toString(36).substr(2,9)}var S=function(e,t){return e.reduce(function(e,n){return e[n[t]]=n,e},{})};n(169);var N=n(71);function I(e){var t,n,a=e.msg,o=e.handleButtonClick,s=e.uid;return a.buttons&&a.buttons.length>0&&(n=i.a.createElement("div",{className:"chatti-msgwrap"},a.buttons.map(function(e,t){return i.a.createElement(v.a,{key:s+"chat-btn"+t,onClick:o,basic:!0,color:"blue",value:e.payload},e.title)}))),""!==a.text&&(t=i.a.createElement(N.a,{as:"a",basic:!0,color:"blue"},a.text)),i.a.createElement("div",{className:"chatti-msgwrap"},t,n)}function M(e){var t=e.msg;return i.a.createElement("div",{className:"chatti-msgwrap right"},i.a.createElement(N.a,{as:"a",basic:!0,color:"black"},t.text))}var _=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).handleInputKeypress=n.handleInputKeypress.bind(Object(k.a)(n)),n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"handleInputKeypress",value:function(e){"Enter"!==e.key&&13!==e.charCode||(this.props.handleEnterMessage(e.currentTarget.value),e.currentTarget.value="")}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(C.a,{style:{width:"100%"},icon:"location arrow",placeholder:"Send...",onKeyPress:this.handleInputKeypress}))}}]),t}(i.a.Component),T=function(e){function t(e){var n;Object(c.a)(this,t);var a=(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).props.httpurl;return n.state={messages:[]},n.userId="user"+A(),n.backend=new f(a),console.log("Chat listening on",a),n.handleEnterMessage=n.handleEnterMessage.bind(Object(k.a)(n)),n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"postNewMessage",value:function(e){var t=this;console.log("Got response",e),this.setState(function(t){for(var n in e){var a=e[n];t.messages.push({sender:"",text:a.text,buttons:a.buttons||[]})}return t}),this.backend.get("/conversations/"+this.userId+"/tracker").then(function(e){t.props.onIntentChange(e)},function(e){console.log("Failed to post new message",e)})}},{key:"sendMessage",value:function(e){var t=this,n={sender:this.userId,message:e};this.backend.post("/webhooks/rest/webhook",n).then(function(e){t.postNewMessage(e)},function(e){console.log("Failed to post new message",e)})}},{key:"handleEnterMessage",value:function(e){var t=this;console.log("Mesage entered ",e),this.setState(function(n){return n.messages.push({sender:t.userId,text:e}),n}),this.sendMessage(e)}},{key:"handleButtonClick",value:function(e){this.handleEnterMessage(e.target.value)}},{key:"render",value:function(){var e=[];for(var t in this.state.messages){var n=this.state.messages[t];n.sender===this.userId?e.push(i.a.createElement(M,{key:t,uid:"msg"+t,msg:n})):e.push(i.a.createElement(I,{key:t,uid:"msg"+t,msg:n,handleButtonClick:this.handleButtonClick.bind(this)}))}var a={};return this.props.hide&&(a.display="none"),i.a.createElement("div",{className:"chatti-container",style:a},i.a.createElement(p.a,{size:"medium"},"Talk with bot"),i.a.createElement(x.a,{className:"chatti-content"},e),i.a.createElement(_,{handleEnterMessage:this.handleEnterMessage}))}}]),t}(i.a.Component),P=n(65),F=n(70),D=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"in";return Object(c.a)(this,t),(e=Object(u.a)(this,Object(h.a)(t).call(this,n,"intent"))).position=void 0,e.position=n,e}return Object(m.a)(t,e),Object(d.a)(t,[{key:"serialize",value:function(){return F.merge(Object(P.a)(Object(h.a)(t.prototype),"serialize",this).call(this),{position:this.position})}},{key:"deSerialize",value:function(e,n){Object(P.a)(Object(h.a)(t.prototype),"deSerialize",this).call(this,e,n),this.position=e.position}},{key:"createLinkModel",value:function(){var e=new j.DefaultLinkModel;return e.setColor("green"),e}}]),t}(j.PortModel),z=function e(t,n){Object(c.a)(this,e),this.type=void 0,this.name=void 0,this.text=void 0,this.texts=void 0,this.type=t,this.name=n,this.texts=[]},B=function e(){Object(c.a)(this,e),this.title=void 0,this.payload=void 0,this.title="",this.payload=""},H=function e(t,n){Object(c.a)(this,e),this.type=void 0,this.name=void 0,this.text=void 0,this.texts=void 0,this.buttons=void 0,this.type=t,this.name=n,this.text="",this.texts=[],this.buttons=[]},L=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,"intent"))).name=void 0,n.intent=void 0,n.actions=void 0,n.active=void 0,n.name=e,n.intent=new z("text",n.name),n.actions=[],n.active=!1,n.addPort(new D("in")),n.addPort(new D("out")),n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"serialize",value:function(){return F.merge(Object(P.a)(Object(h.a)(t.prototype),"serialize",this).call(this),{name:this.name,intent:this.intent,actions:this.actions})}},{key:"deSerialize",value:function(e,n){Object(P.a)(Object(h.a)(t.prototype),"deSerialize",this).call(this,e,n),this.name=e.name,this.intent=e.intent,this.actions=e.actions}},{key:"setIntentTexts",value:function(e){this.intent.texts=e}},{key:"setActionTexts",value:function(e){var t=[],n=new H("utter",this.name);n.texts=e,t.push(n),this.actions=t}},{key:"addAction",value:function(e){this.actions.push(e)}}]),t}(j.NodeModel),K=function(e){function t(){var e;Object(c.a)(this,t),(e=Object(u.a)(this,Object(h.a)(t).call(this,"fallback"))).intent.type="fallback";var n=new H("action_default_fallback","action_default_fallback");return n.text="Fallback",e.addAction(n),e}return Object(m.a)(t,e),t}(L),U=(n(350),n(399)),R=n(394),W=function(e){function t(e){var n;Object(c.a)(this,t);var a=(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).props.node;return n.state={id:"nodew"+a.id},n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.node,t=e.active?" active":"";return a.createElement("div",{className:"intent-node"+t,style:{position:"relative",width:this.props.width,height:this.props.height}},a.createElement("div",{style:{position:"absolute",zIndex:10,top:-17,left:this.props.width/2-8,background:"silver"}},a.createElement(j.PortWidget,{name:"in",node:this.props.node})),a.createElement("div",{style:{position:"absolute",zIndex:10,top:this.props.height-2,left:this.props.width/2-8,background:"silver"}},a.createElement(j.PortWidget,{name:"out",node:this.props.node})),a.createElement("div",{className:"intent-grid"},a.createElement(U.a,{vertical:!0,textAlign:"center",className:"intent-header"},a.createElement(p.a,{size:"tiny"},e.name)),a.createElement(U.a,{vertical:!0,textAlign:"left"},a.createElement("div",{className:"intent-label"},"Intents:"),a.createElement(R.a,{className:"intent-list"},e.intent.texts.map(function(t,n){if(!(n>2))return a.createElement(R.a.Item,{key:"insen"+e.id+n},t)}))),a.createElement(U.a,{vertical:!0,textAlign:"left"},a.createElement("div",{className:"intent-label"},"Actions:"),a.createElement(R.a,{className:"intent-list"},e.actions.map(function(t,n){if(!(n>1))return"utter"===t.type?t.texts.map(function(t,i){if(!(i>1))return a.createElement(R.a.Item,{key:"outsen"+e.id+n+i},t)}):""!==t.text?a.createElement(R.a.Item,{key:"outsen"+e.id+n},"- ",t.text):void 0})))))}}]),t}(a.Component);W.defaultProps={size:150,node:new L("UniqueName"),width:300,height:170};var G=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(h.a)(t).call(this,"intent"))}return Object(m.a)(t,e),Object(d.a)(t,[{key:"generateReactWidget",value:function(e,t){return a.createElement(W,{key:"widget"+t.id,node:t})}},{key:"getNewInstance",value:function(){return new L("UniqueName")}}]),t}(j.AbstractNodeFactory),q=function(e){function t(e,n){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).cb=void 0,a.cb=n,a}return Object(m.a)(t,e),Object(d.a)(t,[{key:"getNewInstance",value:function(e){return this.cb(e)}}]),t}(j.AbstractPortFactory),J=n(192),X=n(396),Y=n(391),Z=n(395),$=(n(170),function(e){function t(e){var n;Object(c.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).handleIntentInputChange=function(e){var t=e.target.value;/^[0-9a-zA-Z_.-]*$/g.test(t)&&n.setState(function(e){return e.intent.name=t,e})},n.handleIntentTextChange=function(e){var t=e.target.value;n.setState(function(e){return e.intent.text=t,e.intent.texts=t.split("\n"),e})},n.handleAddAction=function(e,t){var a=t.value;if(e.persist(),""!==a){var i=new H(a,A());"utter"!==i.type&&"utter_buttons"!==i.type&&(i.text=e.target.textContent),n.setAction(i)}},n.handleActionUtterInputChange=function(e,t){var a=t.iaction,i=e.target.value;a.text=i,a.texts=i.split("\n"),n.setAction(a)},n.handleActionDismiss=function(e,t){var a=t.action_name;n.deleteAction(a)},n.handleActionTextChange=function(e,t){var n=t.value;console.log(n)},n.handleActionAddButton=function(e,t){var a=t.iaction,i=new B;a.buttons.push(i),n.setAction(a)},n.handleActionButtonInputChange=function(e,t){var a=t.iaction,i=t.btn,o=t.index,s=e.target.value;a.buttons[o][i]=s,n.setAction(a)},n.handleActionButtonUtterInputChange=function(e,t){var a=t.iaction,i=e.target.value;a.text=i,n.setAction(a)};var a=e.node;for(var i in n.state={name:a.name,intent:a.intent,actions:S(a.actions,"name")},n.state.intent.text=n.state.intent.texts.join("\n"),n.state.actions){var o=n.state.actions[i];"utter"===o.type&&(n.state.actions[i].text=o.texts.join("\n"))}return console.log(n.state.actions),n.submitHandler=n.submitHandler.bind(Object(k.a)(n)),n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"setAction",value:function(e){this.setState(function(t){return t.actions[e.name]=e,t})}},{key:"findAction",value:function(e){return this.state.actions[e]}},{key:"deleteAction",value:function(e){this.setState(function(t){return delete t.actions[e],console.log("deleting action",e,t.actions),t})}},{key:"submitHandler",value:function(){console.log("SUBMIT");var e=Object(J.a)({},this.state);e.actions=Object.values(e.actions),this.props.onSubmit(e)}},{key:"render",value:function(){var e=this,t=this.props.node;return i.a.createElement("div",{className:"widget-editor-container"},i.a.createElement(w.a,{onSubmit:this.submitHandler},i.a.createElement(w.a.Field,null,i.a.createElement("label",null,"Name"),i.a.createElement(C.a,{key:"wname",disabled:"default"===t.name,placeholder:"Allowed chars [0-9a-zA-Z_.-]",value:this.state.intent.name,onChange:this.handleIntentInputChange})),i.a.createElement(p.a,{size:"small"},"Intents"),i.a.createElement(w.a.Field,null,i.a.createElement(X.a,null,i.a.createElement(X.a.Header,{className:"we-msg-header"},"Intents"),i.a.createElement(X.a.Content,null,i.a.createElement(Y.a,{key:"winputsentences",className:"we-textarea",placeholder:"Press Enter to add more",value:this.state.intent.text,onChange:this.handleIntentTextChange})))),i.a.createElement(p.a,{size:"small"},"Actions"),function(e,t){var n=[];for(var a in e){var i=t(e[a],a);n.push(i)}return n}(this.state.actions,function(t,n){return"utter"===t.type?i.a.createElement(w.a.Field,{key:"we-field"+t.name+n},i.a.createElement(X.a,{onDismiss:e.handleActionDismiss,action_name:t.name},i.a.createElement(X.a.Header,{className:"we-msg-header"},"Responses"),i.a.createElement(X.a.Content,null,i.a.createElement(Y.a,{className:"we-textarea",placeholder:"Press Enter to add more",value:t.text,iaction:t,onChange:e.handleActionUtterInputChange})))):"utter_buttons"===t.type?i.a.createElement(w.a.Field,{key:"we-field"+t.name+n},i.a.createElement(X.a,{key:"we-field-message"+t.name+n,onDismiss:e.handleActionDismiss,action_name:t.name},i.a.createElement(X.a.Header,{className:"we-msg-header"},"Buttons"),i.a.createElement(X.a.Content,null,i.a.createElement(w.a.Field,null,i.a.createElement(C.a,{placeholder:"Ask",iaction:t,value:t.text,onChange:e.handleActionButtonUtterInputChange})),t.buttons.map(function(n,a){return i.a.createElement(w.a.Field,{key:"we-field-btn"+t.name+a},i.a.createElement(C.a,{placeholder:"Title",style:{width:"50%"},value:n.title,iaction:t,btn:"title",index:a,onChange:e.handleActionButtonInputChange}),i.a.createElement(C.a,{placeholder:"Use /intent to fire intent",style:{width:"50%"},value:n.payload,iaction:t,btn:"payload",index:a,onChange:e.handleActionButtonInputChange}))}),i.a.createElement(v.a,{type:"button",circular:!0,icon:"add",size:"tiny",iaction:t,onClick:e.handleActionAddButton})))):i.a.createElement(w.a.Field,{key:"we-field"+t.name+n},i.a.createElement(X.a,{key:"we-field-message"+t.name+n,onDismiss:e.handleActionDismiss,action_name:t.name,content:t.text}))}),i.a.createElement(w.a.Field,null,i.a.createElement("label",null,"Add more actions"),i.a.createElement(Z.a,{placeholder:"Select Action",fluid:!0,search:!0,selection:!0,options:[{key:"utter",value:"utter",text:"Response"},{key:"utter_buttons",value:"utter_buttons",text:"Response & Buttons"},{key:"action_listen",value:"action_listen",text:"Listen"},{key:"action_restart",value:"action_restart",text:"Restart"},{key:"action_default_fallback",value:"action_default_fallback",text:"Fallback"}],onChange:this.handleAddAction,value:""})),i.a.createElement(v.a,{color:"blue",type:"submit"},"Submit")))}}]),t}(i.a.Component)),Q=n(64),V=n.n(Q);n(368);function ee(e){return i.a.createElement(p.a,{size:"large",className:"diagram-editor-header",textAlign:"center"},e.children)}var te=function(e){function t(e){var n;Object(c.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).handleModelNameChange=function(e){var t=e.target.value;n.setState(function(e){return e.model.name=t,e})},n.handleChatIntentChange=function(e){var t=e.latest_message.intent;n.setIntentNodeActive(t.name)},n.setIntentNodeActive=function(e){var t=n.props,a=t.engine,i=t.model;for(var o in i.nodes)i.nodes[o].active=i.nodes[o].intent.name===e;a.repaintCanvas()};var a=n.props,i=a.engine,o=a.model;n.state={model:{id:o.id,name:"",httpport:0,httpurl:""},saving:!1,saved:!1,modelsaveinfo:"",training:!1,selectednode:null},n.backend=new f;var s=Object(k.a)(n),l=V.a.parse(window.location.search);return n.setupModelListeners(),l.model?n.backend.http("/model/load",{id:l.model},"POST").then(function(e){e.ok?e.json().then(function(e){console.log("Loading model",e),o.deSerializeDiagram(e.diagram,i),i.repaintCanvas(),s.setState(function(t){for(var n in e.model)t.model[n]=e.model[n];return t.saved=!0,t})}):console.log("Loading model failed")}):n.createDemoNodes(),i.setDiagramModel(o),n.addNewNode=n.addNewNode.bind(Object(k.a)(n)),n.saveModel=n.saveModel.bind(Object(k.a)(n)),n.trainModel=n.trainModel.bind(Object(k.a)(n)),n.runModel=n.runModel.bind(Object(k.a)(n)),n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"setupModelListeners",value:function(){var e=this;this.props.model.addListener({nodesUpdated:function(t){t.node.addListener({selectionChanged:function(t){t.isSelected?e.setState({selectednode:t.entity}):e.setState({selectednode:null})}})}})}},{key:"createDemoNodes",value:function(){var e=this.props.model,t=new K;t.setPosition(50,50);var n=new L("Greetings");n.setPosition(500,50),n.setIntentTexts(["Hello","Hi","What's up"]),n.setActionTexts(["Hi. How Can I help you","Hello"]);var a=new L("Introduce");a.setPosition(500,350),a.setIntentTexts(["Who are you","How this works"]),a.setActionTexts(["I am chatbot built on Rasa","I am your assistant today"]);var i=new j.DefaultLinkModel;i.setColor("green"),i.setSourcePort(n.getPort("out")),i.setTargetPort(a.getPort("in")),e.addAll(t,n,a,i),e.name="Test Model"}},{key:"saveModel",value:function(){var e=this,t=this.props.model,n={model:this.state.model,diagram:t.serializeDiagram()};console.log("Save model",n),this.setState({saving:!0,saveinfo:"Parsing Diagram ..."}),this.backend.post("/model/save",n).then(function(n){console.log("Saving modell success",n),e.setState({saving:!1,saved:!0,saveinfo:"Parsing Diagram ..."});var a=V.a.parse(window.location.search);a.model&&a.model===t.id||(a.model=t.id,window.location=window.location.pathname+"?"+V.a.stringify(a))},function(t){console.log("Failed to post hi message",t),e.setState({saving:!1,saveinfo:t})})}},{key:"trainModel",value:function(){var e=this,t={id:this.props.model.id};this.setState({training:!0,saveinfo:"Training model ..."}),this.backend.post("/model/train",t).then(function(t){console.log("Training modell success",t),e.runModel()},function(t){console.log("Failed to post hi message",t),e.setState({training:!1,saveinfo:t})})}},{key:"runModel",value:function(){var e=this,t={id:this.props.model.id};console.log("Setting state"),this.setState({training:!0,saveinfo:"Running model ..."}),this.setIntentNodeActive(""),this.backend.post("/model/run",t).then(function(t){console.log("Training modell success",t),e.setState(function(e){return e.training=!1,e.saveinfo="Model up and running",e.model.httpport=t.httpport,e.model.httpurl=t.httpurl,e})},function(t){console.log("Failed to post hi message",t),e.setState({training:!1,saveinfo:t})})}},{key:"addNewNode",value:function(){var e=this.props.model,t=new L("intent"+A());console.log(e,e.offsetX,e.offsetY);var n=-1*e.offsetX+50,a=-1*e.offsetY+50;t.setPosition(n,a),e.addAll(t),t.setSelected(!0)}},{key:"widgetEditorSubmit",value:function(e,t){var n=this.props.engine;if(console.log(t),e.name=e.intent.name,e.intent=t.intent,e.actions=t.actions,"text"===e.intent.type)for(var a in e.actions)e.actions[a].name=e.intent.name+A();this.setState({saved:!1}),n.repaintCanvas()}},{key:"widgetEditorKeypress",value:function(e){e.stopPropagation()}},{key:"render",value:function(){var e,t,n,a=this.props.engine,o=this.state.selectednode;return o?(n="Widget Editor",e=i.a.createElement($,{key:"wedit"+o.id,node:o,onSubmit:this.widgetEditorSubmit.bind(this,o)})):(n="Designer",t=i.a.createElement(w.a,null,i.a.createElement(w.a.Group,{widths:"equal"},i.a.createElement(w.a.Input,{width:10,type:"text",value:this.state.model.name,onChange:this.handleModelNameChange}),i.a.createElement(w.a.Button,{fluid:!0,width:6,color:"blue",loading:this.state.saving,onClick:this.saveModel},"Save Model")),i.a.createElement(w.a.Group,{widths:"equal"},i.a.createElement(w.a.Button,{fluid:!0,width:6,color:"teal",disabled:this.state.training||!this.state.saved,loading:this.state.training,onClick:this.trainModel},"Train Model")),i.a.createElement(w.a.Field,null,i.a.createElement("label",null,"BOT URL: ",this.state.model.httpurl))),e=i.a.createElement("div",null,i.a.createElement(p.a,{size:"medium"},"Nodes"),i.a.createElement(v.a,{color:"teal",onClick:this.addNewNode},"Add New Node"))),i.a.createElement(i.a.Fragment,null,i.a.createElement(j.DiagramWidget,{className:"diagram-canvas",diagramEngine:a}),i.a.createElement("div",{className:"diagram-editor",onKeyDown:this.widgetEditorKeypress,onKeyPress:this.widgetEditorKeypress,onKeyUp:this.widgetEditorKeypress},i.a.createElement(ee,null,n),t,i.a.createElement(T,{hide:null!=o,key:"chatbot"+this.state.model.httpport,httpurl:this.state.model.httpurl,onIntentChange:this.handleChatIntentChange}),e))}}]),t}(i.a.Component),ne=function(e){console.log("Drawing canvas");var t=new j.DiagramEngine;t.installDefaultFactories(),t.registerPortFactory(new q("intent",function(){return new D})),t.registerNodeFactory(new G);var n=new j.DiagramModel;return i.a.createElement(te,{className:"srd-demo-canvas",engine:t,model:n})},ae=function(e){function t(e){var n;Object(c.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).handleFallbackActionTextChange=function(e){var t=e.target.value;n.setState(function(e){return e.actions.action_default_fallback.text=t,e.actions.action_default_fallback.texts=t.split("\n"),e})},n.submitHandler=function(e){var t=n.state;console.log("SUBMIT"),n.backend.http("/model/data/save",t,"POST").then(function(e){e.ok?e.json().then(function(e){console.log("Saveing model actions",e)}):console.log("Saving model actions failed")})},n.state={id:"",actions:{action_default_fallback:new H("action_default_fallback","action_default_fallback")}},n.backend=new f;var a=V.a.parse(window.location.search),i=Object(k.a)(n);return a.model&&n.backend.http("/model/data/load",{id:a.model},"POST").then(function(e){e.ok?e.json().then(function(e){console.log("Loading model actions",e),i.setState(function(t){for(var n in e)t[n]=e[n];return t})}):console.log("Loading model actions failed")}),n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return i.a.createElement(w.a,{style:{padding:"20px"},onSubmit:this.submitHandler},i.a.createElement(w.a.Group,{unstackable:!0,widths:3},i.a.createElement(w.a.Field,null,i.a.createElement("label",null,"Fallback Action"),i.a.createElement(w.a.TextArea,{style:{minHeight:"120px"},placeholder:"Press Enter to add more",value:this.state.actions.action_default_fallback.text,onChange:this.handleFallbackActionTextChange},">"))),i.a.createElement(w.a.Button,{type:"submit"},"Submit"))}}]),t}(i.a.Component);function ie(e){e.match;var t=e.location,n=function(e){return i.a.createElement(l.b,Object.assign({},e,{isActive:function(t,n){return n.pathname+n.search===e.to},activeClassName:"active"}))};return i.a.createElement(l.a,null,i.a.createElement(y.a,{className:"nav-menu",size:"large"},i.a.createElement(y.a.Item,{as:n,to:"/designer/editor".concat(t.search),content:"Designer"}),i.a.createElement(y.a.Item,{as:n,to:"/designer/actions".concat(t.search),content:"Actions"})),i.a.createElement(r.a,{path:"/designer/editor",component:oe}),i.a.createElement(r.a,{path:"/designer/actions",component:se}))}function oe(e){e.match;return i.a.createElement("div",{id:"diagram-container"},i.a.createElement(ne,null))}function se(e){e.match;return i.a.createElement("div",{id:"actions-container"},i.a.createElement(ae,null))}n(380);var le=function(){return i.a.createElement(l.a,null,i.a.createElement(r.a,{exact:!0,path:"/",component:E}),i.a.createElement(r.a,{path:"/home",component:E}),i.a.createElement(r.a,{path:"/designer/editor",component:ie}),i.a.createElement(r.a,{path:"/designer/actions",component:ie}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(le,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[203,1,2]]]);
//# sourceMappingURL=main.220305ea.chunk.js.map